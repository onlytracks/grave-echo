{
  "id": "32ac32d0",
  "title": "Terrain glyph palette — map tile types for zones and world features",
  "tags": [
    "art",
    "map",
    "worldgen",
    "glyphs"
  ],
  "status": "open",
  "created_at": "2026-02-16T00:24:14.935Z"
}

## Goal
Define terrain tile types with Unicode glyphs for zone variety. Currently only
two tile types exist (Floor `·` and Wall `▓`). Zones need distinct terrain to
feel like different places — a corrupted forest can't just be gray dots in green.

This todo is a prerequisite for TODO-061ba800 (zone system) which incorrectly
claims "No new tile types needed."

## Glyph Source
AGENTS.md references: https://raw.githubusercontent.com/globalcitizen/zomia/master/USEFUL-UNICODE.md
All glyphs below are drawn from or inspired by that reference.
Must be single-width and render well in common monospace terminal fonts.
**Test each glyph in-game before committing** — rendering varies across fonts.

## Current Tile Types
```typescript
enum TileType { Floor, Wall }
// Floor: · (gray on black), walkable, transparent
// Wall:  ▓ (white on black), !walkable, !transparent
```

## Proposed Tile Types

### Universal (All Zones)
| Tile          | Glyph | Alt     | fg            | Properties              | Notes                        |
|---------------|-------|---------|---------------|-------------------------|------------------------------|
| Floor         | `·`   |         | zone-colored  | walkable, transparent   | Existing, color varies       |
| Wall          | `▓`   |         | zone-colored  | !walkable, !transparent | Existing, color varies       |
| Door (open)   | `П`   | `π`     | brown         | walkable, transparent   | Zone transitions             |
| Door (closed) | `П`   |         | brown         | !walkable, !transparent | Future: interact to open     |
| Stairs Down   | `⏬`  | `▼`/`>` | brightYellow  | walkable, transparent   | For TODO-11316f7c            |
| Stairs Up     | `⏫`  | `▲`/`<` | brightYellow  | walkable, transparent   | For TODO-11316f7c            |
| Rubble        | `◦`   | `•`     | darkGray      | walkable, transparent   | Decorative, slower movement? |
| Pit           | `░`   |         | darkGray      | !walkable, transparent  | Can see across, can't cross  |

### Verdant Threshold (Corrupted Forest)
| Tile            | Glyph | Alt     | fg           | Properties              | Notes                           |
|-----------------|-------|---------|--------------|-------------------------|---------------------------------|
| Grass           | `,`   | `'`/`෴`| green        | walkable, transparent   | Open areas between trees        |
| Tall grass      | `"`   | `ʺ`    | darkGreen    | walkable, !transparent  | Blocks LOS, walkable — ambush   |
| Tree            | `Ϫ`   | `ψ`/`ϫ`| green/brown  | !walkable, !transparent | Forest walls — organic feel     |
| Corrupted tree  | `ψ`   | `Ѱ`    | darkMagenta  | !walkable, !transparent | Corruption spreading            |
| Mushroom        | `⍾`   |         | brightGreen  | walkable, transparent   | Glowing, decorative             |
| Flower          | `֍`   | `֎`    | yellow       | walkable, transparent   | Decorative, uncorrupted areas   |
| Corrupted bloom | `֎`   |         | magenta      | walkable, transparent   | Decorative, corrupted areas     |
| Vine wall       | `ඦ`   |         | darkGreen    | !walkable, !transparent | Organic wall variant            |
| Shallow water   | `≈`   |         | blue         | walkable, transparent   | Slows movement (future)         |
| Deep water      | `≋`   |         | darkBlue     | !walkable, transparent  | Can see across, can't cross     |

### Dungeon (The Hollow Warren)
| Tile           | Glyph | Alt   | fg          | Properties              | Notes                          |
|----------------|-------|-------|-------------|-------------------------|--------------------------------|
| Stone floor    | `·`   |       | gray        | walkable, transparent   | Standard dungeon               |
| Cracked floor  | `◇`   | `◊`  | darkGray    | walkable, transparent   | Decorative, shows age          |
| Rubble         | `◦`   | `•`  | darkGray    | walkable, transparent   | Collapsed areas                |
| Pillar         | `○`   |       | white       | !walkable, transparent  | LOS blocker in open rooms      |
| Grate          | `⌗`   | `#`  | darkGray    | walkable, transparent   | Decorative floor variant       |
| Cobweb         | `⎈`   |       | white       | walkable, transparent   | Decorative                     |

### Boss Dungeon / Corruption Core
| Tile             | Glyph | Alt   | fg           | Properties              | Notes                       |
|------------------|-------|-------|--------------|--------------------------|-----------------------------|
| Corrupted floor  | `·`   |       | darkRed      | walkable, transparent    | Standard but ominous         |
| Corruption vein  | `᳁`   | `᳃`  | magenta      | walkable, transparent    | Magic markings on ground     |
| Bone pile        | `☠`   |       | white        | walkable, transparent    | Decorative, lore             |
| Dark flame       | `ж`   | `Ӂ`  | red          | !walkable, transparent   | Hazard — damages on contact? |
| Grave marker     | `†`   |       | gray         | !walkable, transparent   | Thematic                     |

## Implementation

### TileType Enum Extension
```typescript
enum TileType {
  Floor, Wall,
  // Universal
  DoorOpen, DoorClosed, StairsDown, StairsUp, Rubble, Pit,
  // Nature
  Grass, TallGrass, Tree, CorruptedTree, Mushroom, Flower,
  CorruptedBloom, VineWall, ShallowWater, DeepWater,
  // Dungeon
  CrackedFloor, Pillar, Grate, Cobweb,
  // Boss/Corruption
  CorruptionVein, BonePile, DarkFlame, GraveMarker,
}
```

### Tile Factory
Create tile factory functions per zone type so the dungeon generator can
request themed tiles:

```typescript
function makeForestFloor(): Tile  // randomly grass, flower, mushroom, or plain
function makeForestWall(): Tile   // randomly tree, corrupted tree, or vine wall
function makeDungeonFloor(): Tile // randomly stone, cracked, rubble, or grate
function makeDungeonWall(): Tile  // standard wall or pillar at room edges
```

### Gameplay Properties
Each tile needs these properties checked:
- `walkable` — can entities move onto it?
- `transparent` — does it block LOS?
- `movementCost`? — future: tall grass/water slows movement (not in scope now, but
  the tile type should support it when needed)

Consider adding an optional `movementCost: number` to the Tile interface now
(default 1) even if nothing reads it yet — avoids a refactor later.

## Glyph Testing Protocol
Before committing any glyph:
1. Render it in the game grid at multiple positions
2. Verify single-width (doesn't shift adjacent tiles)
3. Verify it's distinct from existing entity glyphs (especially `@`, enemy glyphs)
4. Verify color contrast against black background
5. Test in at least the default terminal font

Some candidates from the reference may be double-width or render as boxes
in certain fonts. The Alt column provides fallbacks.

## Files to Change
- `src/map/game-map.ts` — extend TileType enum, add new tile constants
- `src/map/tile-utils.ts` — tile factory functions per zone theme
- `src/map/dungeon-generator.ts` — use themed tiles during room generation
- `src/renderer/panels/game-grid.ts` — ensure new tiles render correctly
- `src/ecs/systems/movement.ts` — respect walkable property (already does)
- `src/ecs/systems/sensory.ts` — respect transparent property (already does)

## Dependencies
- Should be done **before** or **alongside** TODO-061ba800 (zone system)
- Stairs tiles needed by TODO-11316f7c

## Definition of Done
- TileType enum has terrain variety beyond Floor/Wall
- Each zone type has a distinct visual palette of 4+ terrain tiles
- Tile factory functions produce themed terrain
- All glyphs tested in-game and confirmed single-width
- Movement and LOS systems respect new tile properties
- `bun test` passes
